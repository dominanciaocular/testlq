<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html>
<head>
<title>Test de Dominancia ocular (versión borrador)</title>
<link rel="stylesheet" href="test-lq-style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>  
 function calcularLQ() {  
   var rlnumerador,rldenominador,runok,lq;
   const dml = [];
   
   dml.push(document.querySelector('input[name="tarjeta-perforada"]:checked'));
   dml.push(document.querySelector('input[name="senalar-dedo"]:checked'));
   dml.push(document.querySelector('input[name="caleidoscopio"]:checked'));
   dml.push(document.querySelector('input[name="objetivo-camara-fotos"]:checked'));

   dml.push(document.querySelector('input[name="punto-proximo-convergencia"]:checked'));
   dml.push(document.querySelector('input[name="nariz-espejo-mano"]:checked'));
   dml.push(document.querySelector('input[name="oftalmoscopio"]:checked'));
   dml.push(document.querySelector('input[name="tubo-pequeno"]:checked'));

   dml.push(document.querySelector('input[name="lejos-filtro-rojo"]:checked'));
   dml.push(document.querySelector('input[name="lejos-emborronamiento"]:checked'));
   dml.push(document.querySelector('input[name="lejos-worth"]:checked'));
   dml.push(document.querySelector('input[name="lejos-test-polarizado"]:checked'));

   dml.push(document.querySelector('input[name="cerca-filtro-rojo"]:checked'));
   dml.push(document.querySelector('input[name="cerca-emborronamiento"]:checked'));
   dml.push(document.querySelector('input[name="cerca-worth"]:checked'));
   dml.push(document.querySelector('input[name="cerca-test-polarizado"]:checked'));

   rlnumerador = 0;
   rldenominador = 0;
   runok = true;

   for (var i = 0; i < dml.length; i++) {
     if (dml[i] === null) {
       runok = false;
       alert("¡ATENCIÓN! Para calcular el resultado, hay que completar todas las preferencias de uso del ojo.");
       break;
     }
     if (dml[i].value == "") {
       runok = false;
       alert("ERROR PROGRAMA. Las selecciones no están anexadas a ningún valor (cadena vacía).");
       break;
     }
     if (isNaN(dml[i].value)) {
       runok = false;
       alert("ERROR PROGRAMA. Las selecciones no están anexadas a un valor numérico.");
       break;
     }

     rlnumerador = rlnumerador + parseFloat(dml[i].value);
     rldenominador = rldenominador + Math.abs(parseFloat(dml[i].value));
   }

   if (runok) {
     document.getElementById("label-rlnumerador").innerHTML = rlnumerador;
     document.getElementById("label-rldenominador").innerHTML = rldenominador;

     if (rldenominador == 0) { lq = 0; }
     else {
       lq = Math.round(100 * (rlnumerador / rldenominador));
       document.getElementById("label-lq").innerHTML = lq + " %";
     }
   }
 }  
</script>  
</head>
<body>

 <div class="divTable blueTable">
  <div class="divTableHeading">
   <div class="divTableRow">
    <div class="divTableHead">Tipo de dominancia</div>
    <div class="divTableHead">Prueba de dominancia</div>
    <div class="divTableHead">Preferencia de uso del ojo<br>(Izquierdo / Derecho / No concluyente)</div>
   </div>
  </div>

  <div class="divTableBody">

   <div class="divTableRow" style="font-weight:bold">Dominancia motora lejos</div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora lejos</div><div class="divTableCell">Tarjeta perforada (Hold-in-card-test)</div><div class="divTableCell"><input type="radio" name="tarjeta-perforada" value="-1"/>Izq <input type="radio" name="tarjeta-perforada" value="1"/>Der <input type="radio" name="tarjeta-perforada" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora lejos</div><div class="divTableCell">Señalar con el dedo</div><div class="divTableCell"><input type="radio" name="senalar-dedo" value="-1"/>Izq <input type="radio" name="senalar-dedo" value="1"/>Der <input type="radio" name="senalar-dedo" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora lejos</div><div class="divTableCell">Caleidoscopio</div><div class="divTableCell"><input type="radio" name="caleidoscopio" value="-1"/>Izq <input type="radio" name="caleidoscopio" value="1"/>Der <input type="radio" name="caleidoscopio" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora lejos</div><div class="divTableCell">Enfocar a través del objetivo de una cámara de fotos</div><div class="divTableCell"><input type="radio" name="objetivo-camara-fotos" value="-1"/>Izq <input type="radio" name="objetivo-camara-fotos" value="1"/>Der <input type="radio" name="objetivo-camara-fotos" value="0"/>NC</div></div>

   <div class="divTableRow" style="font-weight:bold">Dominancia motora cerca</div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora cerca</div><div class="divTableCell">Punto próximo de convergencia</div><div class="divTableCell"><input type="radio" name="punto-proximo-convergencia" value="-1"/>Izq <input type="radio" name="punto-proximo-convergencia" value="1"/>Der <input type="radio" name="punto-proximo-convergencia" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora cerca</div><div class="divTableCell">Centrar nariz en espejo de mano</div><div class="divTableCell"><input type="radio" name="nariz-espejo-mano" value="-1"/>Izq <input type="radio" name="nariz-espejo-mano" value="1"/>Der <input type="radio" name="nariz-espejo-mano" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora cerca</div><div class="divTableCell">Enfocar a través de oftalmoscopio</div><div class="divTableCell"><input type="radio" name="oftalmoscopio" value="-1"/>Izq <input type="radio" name="oftalmoscopio" value="1"/>Der <input type="radio" name="oftalmoscopio" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia motora cerca</div><div class="divTableCell">Mirar por un tubo pequeño</div><div class="divTableCell"><input type="radio" name="tubo-pequeno" value="-1"/>Izq <input type="radio" name="tubo-pequeno" value="1"/>Der <input type="radio" name="tubo-pequeno" value="0"/>NC</div></div>

   <div class="divTableRow" style="font-weight:bold">Dominancia sensorial lejos</div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial lejos</div><div class="divTableCell">Filtro Rojo</div><div class="divTableCell"><input type="radio" name="lejos-filtro-rojo" value="-1"/>Izq <input type="radio" name="lejos-filtro-rojo" value="1"/>Der <input type="radio" name="lejos-filtro-rojo" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial lejos</div><div class="divTableCell">Emborronamiento con lente positiva</div><div class="divTableCell"><input type="radio" name="lejos-emborronamiento" value="-1"/>Izq <input type="radio" name="lejos-emborronamiento" value="1"/>Der <input type="radio" name="lejos-emborronamiento" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial lejos</div><div class="divTableCell">Test de Worth</div><div class="divTableCell"><input type="radio" name="lejos-worth" value="-1"/>Izq <input type="radio" name="lejos-worth" value="1"/>Der <input type="radio" name="lejos-worth" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial lejos</div><div class="divTableCell">Test Polarizado</div><div class="divTableCell"><input type="radio" name="lejos-test-polarizado" value="-1"/>Izq <input type="radio" name="lejos-test-polarizado" value="1"/>Der <input type="radio" name="lejos-test-polarizado" value="0"/>NC</div></div>

   <div class="divTableRow" style="font-weight:bold">Dominancia sensorial cerca</div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial cerca</div><div class="divTableCell">Filtro Rojo</div><div class="divTableCell"><input type="radio" name="cerca-filtro-rojo" value="-1"/>Izq <input type="radio" name="cerca-filtro-rojo" value="1"/>Der <input type="radio" name="cerca-filtro-rojo" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial cerca</div><div class="divTableCell">Emborronamiento con lente positiva</div><div class="divTableCell"><input type="radio" name="cerca-emborronamiento" value="-1"/>Izq <input type="radio" name="cerca-emborronamiento" value="1"/>Der <input type="radio" name="cerca-emborronamiento" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial cerca</div><div class="divTableCell">Test de Worth</div><div class="divTableCell"><input type="radio" name="cerca-worth" value="-1"/>Izq <input type="radio" name="cerca-worth" value="1"/>Der <input type="radio" name="cerca-worth" value="0"/>NC</div></div>
   <div class="divTableRow">
    <div class="divTableCell">Dominancia sensorial cerca</div><div class="divTableCell">Test Polarizado</div><div class="divTableCell"><input type="radio" name="cerca-test-polarizado" value="-1"/>Izq <input type="radio" name="cerca-test-polarizado" value="1"/>Der <input type="radio" name="cerca-test-polarizado" value="0"/>NC</div></div>

  </div>
 </div>

 <p><button type="button" onclick="calcularLQ()">Calcular LQ</button></p>
 <p><div style="width:150px; font-weight:bold; background:yellow;">LQ = <label id="label-lq"/></div></p>
 <p><div style="width:300px;color:#888888">100 * [(Der-Izq) / (Der+Izq)] %</div></p>
 <p><div style="width:150px">Der-Izq = <label id="label-rlnumerador"/></div></p>
 <p><div style="width:150px">Der+Izq = <label id="label-rldenominador"/></p>
</body>
</html> 